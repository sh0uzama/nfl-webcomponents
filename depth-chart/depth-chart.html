<link rel="import" href="../search-players/search-players.html">
<link rel="import" href="player-card.html">

<dom-module id="depth-chart">

	<style include="iron-flex iron-flex-alignment">
		:host {
			display: block;
		}

		.section-add-position {
			margin-bottom: 20px;
		}

		.section-header {
			background: #eee;
			padding: 10px;
			text-transform: uppercase;
			border-bottom: solid 1px #999;
		}
	</style>

	<template>

		<template is="dom-repeat" items="[[value.sections]]" as="section" index-as="sectionIndex">

			<div class="section-header">[[localize(section.name)]]</div>

			<template is="dom-repeat" items="[[section.positions]]" as="position" index-as="positionIndex" section-index="[[sectionIndex]]">

				<div class="layout horizontal">

					<paper-input value="{{position.name}}" on-input="_onPositionInput" on-change="_onPositionChange" no-label-float="true" label="Position Code"
					 always-float-label></paper-input>

					<div class="flex layout horizontal wrap">

						<template is="dom-repeat" items="[[position.players]]" as="playerEntityId" index-as="playerIndex" section-index="[[sectionIndex]]"
						 position-index="[[positionIndex]]">
							<paper-card>
								<player-card class="card-content" player="[[_getPlayer(playerEntityId)]]"></player-card>
								<div class="card-actions">
									<paper-button on-tap="_deletePlayer">DELETE</paper-button>
								</div>
							</paper-card>
						</template>
						<div>
							<paper-icon-button icon="add" on-tap="_addPlayer" title="Add Player"></paper-icon-button>
							<span>Add Player</span>
						</div>


					</div>
				</div>

			</template>

			<div class="section-add-position">
				<paper-icon-button icon="add" on-tap="_addPosition" title="Add Position"></paper-icon-button>
				<span>Add Position</span>
			</div>

		</template>

		<search-players id="searchPlayers" on-player-selected="_playerSelected"></search-players>

	</template>

	<script src="depth-chart.js"></script>

</dom-module>